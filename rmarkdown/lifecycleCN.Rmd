---
title: "A Lifecycle Model for Chinese Urban Households"
author: "Zijian Wang"
date: "`r Sys.Date()`"
bibliography: RefLife.bib
output: 
  html_document:
    toc: true
    number_sections: true
---

```{=html}
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  TeX:{
      equationNumbers:{ 
          autoNumber: "all"
          } 
      }
});
</script>
```
# Model Framework

## Objective Function

We assume time is discrete and the agent's preference is time-separable. The agent's instantaneous utility at age $t$, denoted by $u_t$, is a weighted sum of three separate terms: the utility from the agent's own health and consumption $u^1_t$, the utility from spending on her children $u^2_t$, and the utility from bequest $u^3_t$. Let $\kappa_1$ and $\kappa_2$ be the relative importance of spending on her children and leaving a bequest, we have:

$$ \label{eq:utility}
u_t = u^1_t + \kappa_1\cdot u^2_t + \kappa_3\cdot u^3_t 
$$

In each term, we use a CRRA-style utility function. For the first term, let $e_t$ be the agent's health status at age $t$ (greater $e_t$ for better health status), $C_t$ be her own consumption. Following @palumbo_uncertain_1999 and @de_nardi_why_2010, we define $u^1_t$ as a product of the agent's consumption utility and a multiplier $E(e_t)$, which is a function of her health status:

$$
u^1_t = E(e_t)\cdot\frac{C_t^{1-\gamma}}{1-\gamma}
$$

where $\gamma$ is the coefficient of relative risk aversion. $E(e_t)$ is increasing with $e_t$, implying that health and consumption are complements to each other. We then construct $C_t$ by the Cobb-Douglas product of the quantity of non-housing consumption $c_t$ and of housing consumption $h_t$:

$$\label{eq:consumption}
C_t = c_t^\rho h_t^{1-\rho}
$$

As is pointed out in @cocco_portfolio_2005 and @yao_optimal_2005, the parameter $\rho$ in equation (\ref{eq:consumption}) can be interpreted as the optimal proportion of non-housing consumption when the agent makes single-period consumption decisions. Hereafter, we assume the price per unit non-housing consumption and per unit housing consumption is 1 and $v_t$, and let $h_t$ also represent the size of house where the agent lives.

For the second term in equation \eqref{eq:utility}, we assume the agent's $u^2_t$ is the sum of the utility from her children's consumption and the utility from the assets she has transferred to each child. If the agent has to supports more than one child at a time, we assume each child consumes equally. Let $n_t$ denotes the number of children she has to support at age $t$, $F_t$ be the consumption of each child, $G_{it}$ be the utility she obtained at age $t$ through the assets having transferred to child $i$, we have:

$$
u^2_t = n_t^\alpha\frac{F_t^{1-\gamma}}{1-\gamma} + \sum^{n_t}_{i=1}G_{it}
$$

where the first term (left to the plus sign) represents the agent's utility derived from her children's consumption, $\alpha$ determines the impact of the number of children to support on the overall utility. Our setting is in line with @barro_fertility_1989.

For the third term in equation \eqref{eq:utility}, we refer to @hubbard_importance_1994 that assumes the agent's life span is risky. Let $W_t$ be her net wealth at the end of age $t$, $\psi_t$ be the her survival probability at that moment, we have:

$$
u^3_t = (1-\psi_t) \frac{ W_t^{1-\gamma}}{1-\gamma}
$$

We assume the longest time she can live is $T$. Thus, when $t=T$, she dies with probability 1, i.e. $\psi_T=0$.

Let $\beta$ be the discounting factor, $V_t$ be the optimal state-value function for the agent. We can construct the following Bellman equation:

$$
V_t(s) = \max_a \{u_t(a,s) + \beta E_t[V_{t+1}(s)]|\Theta\}
$$

where $a$ and $s$ denote the sets of action and state variables, $\Theta$ denotes the set of parameters in the model.

There are three types of financial assets: short-term bond, long-term bond, and equity. The agent can allocate assets across them via two savings accounts: (1) A tax-deferred defined-contribution pension account (referred to as "private pension account" hereafter). She can invest in this account each year prior to retirement, and withdraws funds from it after retirement. (2) Liquid savings account. She can deposit or withdraw money to or from this account at any time. Meanwhile, the agent can invest in housing. We assume she can and can only either rent or own one house at a time.

Throughout the working life, the agent experiences the following six steps each year: (i) earning labor income and asset returns; (ii) making mandatory contribution to social insurances and housing fund; (iii) making voluntary contribution to private pension; (iv) paying income tax; (v) making investment decisions, paying for her own and her children's consumption; (vi) dies at the end of year with probability $1-\psi_t$ . After retirement, the agent's labor incomes are replaced by pension benefits, lump-sum redemption from housing fund, and returns from private pension. Besides, she no longer needs to implement step (ii)-(iv).

One puzzle about China that has received considerable attention is why its household savings rate rose rapidly from the 1980s to the 2010s and has remained consistently at a high level. This cannot be simply explained by weak social security system, precautionary saving motive, or the increased ratio of working population. [^1] Some influential explanations focus on inter-generational transfer. Curtis, Lugauer, and Mark [-@curtis_demographic_2015; -@curtis_demographics_2017] propose that the one-child policy, starting from 1980 and ending in 2016, led to a decline in family size, thus the Chinese parents can spend less in their children's consumption and have more to save. @du_theory_2013 and @wei_competitive_2011 propose and verify a theory named "competitive saving motive", that is, Chinese parents tend to accumulate and transfer assets for and to their children, in order to increase their children's competitive power on marriage market. To capture these insights, we introduce the spending on children to the agent's objective function. We also assume, at the time that one of her children gets married, she transfers a certain amount of assets to that child.

[^1]: For an introduction to the Chinese saving puzzle, see @modigliani_chinese_2004.

## Income Process

### Labor Income

Let $y_t$ denote the agent's (real) pre-tax labor income.[^2] Let random variables $z^u_t$, $z^p_t$, $z^q_t$ be the employment status, permanent income shock, and transitory income shock. The deterministic part of labor income is represented by function $f_y(t,X_t)$, where $X_t$ is the agent's demographic features (gender and education).[^3] Employment status $z^u_t$ can only be 0 (employed) or 1 (unemployed), and $P\{z^u_t=1\}$ denotes the probability of being unemployed. Transitory shock $z^q_t$ follows an i.i.d. normal distribution. We assume permanent shock $z^p_t$ follows a AR(1) process with innovations drawn from a mixture of two normal distributions - this allows the distribution of income shock to have a negative skewness and high kurtosis, as is shown in @guvenen_nature_2014 and @guvenen_what_2021. Therefore, the agent's labor income is determined by

[^2]: Given the agent's nonmial pre-tax income $\tilde{Y}_t$ and price level $P_t$, we can calculate $y_t$ by $y_t = \tilde{Y}_t/P_t$. In estimation, we set $P_t=1$ in the first year of the panel data, and in the subsequent years, $P_t$ grows at the observed inflation rate.

[^3]: For how to estimation $f_y(t,X_t)$, see @campbell_investing_2001 and @cocco_consumption_2005.

```{=tex}
\begin{equation}
\begin{split}
& y_t = (1-z^u_t)\cdot e^{f_y(t,X_t) + z^p_t + z^q_t} \\
& z^q_t \sim N(0,\sigma_q^2) \\
& z^p_t = \delta^pz^p_{t-1} + \eta_t \\
& \eta_t \sim \left\{
\begin{split}
& N(\mu_{\eta_1},\sigma_{\eta_1}) \; \text{with prob.} \,p_\eta \\
& N(\mu_{\eta_2},\sigma_{\eta_2}) \; \text{with prob.} \,1-p_\eta\\
\end{split}
\right. \\
& P\{z^u_t=1\} = 1/(1+e^{-f_u(t,z^p_t)})
\end{split}
\end{equation}
```
We assume $\mu_{\eta_1}p_\eta + \mu_{\eta_2}(1-p_\eta)=0$, and $\mu_{\eta,1}<0$. For simplicity, we set

$$
f_u(t,z^p_t) = \delta^u_0+\delta^u_1\cdot t+\delta^u_2\cdot z^p_t+\delta^u_3\cdot t\cdot z^p_t
$$

which is a linear function of age and permanent income shock.

### Pension Benefit

China's social security system consists of five social insurances and a housing fund.[^4] Each month during the working life, the agent and her employer need to make a mandatory contribution to these social security schemes (as long as she is employed). This contribution is tax-deductible. Normally, the annual contribution made by the agent herself is a fixed rate $\xi_c$ multiplied by a fraction (or all) of her labor income for the previous year - the former is termed as "employee contribution rate", the latter is termed as "social security contribution base". We represent the agent's nominal income by $\tilde{Y}_t$, and her contribution base by $Y^B_t$. If she is unemployed in the previous year, that is, she is a new employee to the current company, then $Y^B_t$ will refer to her salary of the current year.

[^4]: The five social insurances are basic pension, medical insurance, unemployment insurance, maternity insurance, work injury insurance. We mainly focus on basic pension and medical insurance, for the contribution rates for other insurances are trivial ($\leq$ 0.5% ) compared to the two.

Legally, the contribution base cannot be less than 0.6 times the province-wide average wage, or more than 3 times the province-wide average wage.Let $Y^*_t$ be the province-wide average wage. Thus, we can calculate $Y^B_t$ via:

$$
Y^B_t=\max\{\min\{\xi_b[\tilde{Y}_{t-1}z^u_{t-1}+\tilde{Y}_t(1-z^u_{t-1})],3Y^*_t\},0.6Y^*_t\}\times z^u_t
$$

where $\xi_b$ is a parameter between 0 and 1. When the agent is unemployed at age $t$, we set $Y^B_t=0$. For simplicity, we assume $Y^*_t$ is a AR(1) process.

In China's social security schemes, the highest employee contribution rate is for basic pension. Normally, an employee contributes 8% of her contribution base to the basic pension every month. In addition, her employer also needs to contribute an amount equal to 16% of her contribution base to the pension. After retirement, the agent receives pension benefit each year, which replaces her labor income. This benefit is constituted by two parts: the first part,which we term as $B^1_t$, is called "fundamental pension"; the second part, which we term $B^2_t$, is called "individual pension". The amount of fundamental pension benefit is dependent on the agent's previous contributions as well as the province-wide average wage, while individual pension benefit is dependent on the balance of her basic pension account.

To calculate pension benefit, we suppose the agent starts working at age $t_0$, retires at $t_{ret}$. The employee contribution rate to basic pension is $\xi_m$ ($\xi_m<\xi_c$), the employer's match contribution rate is $\xi_n$, the annuity rate for basic pension fund is $i_b$, the life expectancy in China is $t_{exp}$, the balance of the agent's basic pension account is $A^B_t$, where $A^b_{t_0}=0$. According to the official calculation rules, we define $B^1_t$ and $B^2_t$ by

$$
\label{eq:pension1}
B^1_t = \frac{1}{2}\left[\sum_{\tau=t_0}^{t_{ret}-1}\left(\frac{Y^B_\tau}{Y^*_\tau}\right) + \sum_{\tau=t_0}^{t_{ret}-1}z^u_t\right]\times Y^*_t\times1\% 
$$
$$
A^B_{t_{ret}}=\sum_{\tau=t_0}^{t_{ret}-1}
\left( A^B_\tau\cdot (1+i_b)+Y^B_\tau \cdot (\xi_m+\xi_n)\right)
$$
$$
\label{eq:pension2}
B^2_t =A^B_{t_{ret}} / 
\left(\frac{1-(1+i_b)^{-(t_{exp}-t_{ret})}}{1-(1+i_b)^{-1}}\right)
$$

We explain equation \eqref{eq:pension1}-\eqref{eq:pension2} briefly. $B^1_t$ equals to the average of the agent's indexed average wage and the province-wide average wage, multiplied by the number of years where she makes a contribution, then by 1%. The agent's indexed average wage refers to the average ratio of her contribution base to the province-wide average wage across the whole working life. After simplification, we obtain equation \eqref{eq:pension1}. $A^B_{t_{ret}}$ is the balance of the agent's basic pension account at retirement. $B^2_t$ equals to the annual withdrawal amount from the account that can remain constant from the retirement age $t_{ret}$ until the expected lifespan $t_{exp}$ is reached.



## Financial Assets

### Asset Markets

Let $\tilde{R}_{j,t}$ be the return of asset type $j$,  where $j \in J\equiv\{f,l,e\}$ (the letters in bracket represent short-term bond, long-term bond, equity, and housing in order). The asset returns are generated by a VAR(1) model:
$$
\textbf{r}_t = \beta_{r,0}+\beta_{r,1} \textbf{r}_{t-1}+\epsilon_t
$$
where $\textbf{r}_t =[\ln(\tilde{R}_{f,t}),\ln(\tilde{R}_{l,t}),\ln(\tilde{R}_{e,t}),r^{h}_t,i^{CL}_t,i^{HFL}_t,\pi_t]^T$ with $r^h_t$ being the house price growth rate, $i^{CL}_t$ being the commercial mortgage rate, $i^{HFL}_t$ be the housing fund mortgage rate, $\pi_t$ being the inflation rate.

### Private Pension

In 2022, the Chinese government started offering a tax-deferred DC pension to its citizens, which is called "private pension". The private pension differs from basic pension in three ways: First, basic pension is mandatory, while private pension is voluntary and takes a opt-in system. Second, basic pension account is managed by National Social Security Fund, whereas private pension account is managed by the agent -- she can decide both how much to invest and how to allocate money in this account. Third, basic pension is tax-free, while any withdrawal from the private pension account should be taxed at 3%. 

The balance of private pension account is determined by
$$
A^P_{t+1} = \sum_{j\in J} (\tilde{R}_{j,t}A^P_{j,t}+S^P_{j,t+1}) 
$$

where $A^P_{j,t}$ and $S^P_{j,t}$ are the balance of and cash inflow to asset type $j$ in private pension account. $S^P_{t+1}\equiv \sum_{j\in J} S^P_{j,t+1} \leq S_\max$ and $S_\max$ is the maximum amount of fund that can be saved into private pension account each year. For all $j \in J$, $A^P_{j,t} \geq 0$. The range for $S^P_t$ is $[0,\infty)$ when $t<t_{ret}$ and is $(-\infty,0]$ when $t\geq t_{ret}$. When $S^P_t$ is negative, it implies the agent withdraws money from the account that year.

### Liquid Savings

The balance of liquid savings account is determined by 
$$
\begin{split}
& A^L_{t+1} = \sum_{j\in J} (\tilde{R}_{j,t+1}A^L_{j,t}+S^L_{j,t+1}) \\
\end{split}
$$

where $A^L_{t+1} \geq -\bar{A}$, $\bar{A}$ denote credit limit.

## Housing

### Homeonwership

### Housing Fund

## Health Expenditure

## Parental Care

## Consumption Budget

# Parametrization

tab
